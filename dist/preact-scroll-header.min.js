!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("preact")):"function"==typeof define&&define.amd?define(["preact"],e):t.ScrollHeader=e(t.preact)}(this,function(t){"use strict";function e(t,e){(t===a?r:t).addEventListener(n,e)}function i(){}var s,o,n="scroll",r=document,a=r.body,d=function(d){function h(t){var e=this;d.call(this,t),this.height=0,this.buffer=t.buffer||0,this.parent=t.listenTo||null,this.state={isFixed:!1,isReady:!1,isShown:!1},this.onScroll=function(t){var i=(t.target.body||t.target).scrollTop;s||(s=i),i>=e.height?(e.setState({isFixed:!0}),s<=i?(o=0,e.setState({isShown:!1})):(o-i>e.buffer&&e.setState({isShown:!0}),o=o||i),s=i):(o=0,e.setState({isFixed:!1,isShown:!1}))}}return d&&(h.__proto__=d),h.prototype=Object.create(d&&d.prototype),h.prototype.constructor=h,h.prototype.componentDidMount=function(){this.height=this.base.offsetHeight,!this.parent&&(this.parent=this.base.parentNode),!this.props.disabled&&e(this.parent,this.onScroll)},h.prototype.componentWillReceiveProps=function(t){var i=this.parent,s=this.props.disabled;s&&!t.disabled&&e(i,this.onScroll),!s&&t.disabled&&(i===a?r:i).removeEventListener(n,this.onScroll)},h.prototype.shouldComponentUpdate=function(t,e){var i=this.state;return t.disabled!==this.props.disabled||e.isFixed!==i.isFixed||e.isReady!==i.isReady||e.isShown!==i.isShown},h.prototype.componentDidUpdate=function(t,e){var s=this,o=this.state.isFixed;e.isFixed!==o&&setTimeout(function(){return s.setState({isReady:o})},1),e.isShown!==this.state.isShown&&((isShown?t.onShow:t.onHide)||i).call(this,this.base)},h.prototype.render=function(e,i){var s=e.className;return e.disabled||(i.isFixed&&(s+=" "+(e.fixClass||"is--fixed")),i.isReady&&(s+=" "+(e.readyClass||"is--ready")),i.isShown&&(s+=" "+(e.showClass||"is--shown"))),t.h("header",{id:e.id,className:s},t.h("div",null,e.children))},h}(t.Component);return d});